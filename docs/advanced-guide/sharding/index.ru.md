# Начало работы с шардингом

Шардинг обязателен для ботов, которые имеют более 2500 серверов.

## Шардинг менеджер/менеджер шардов
Экземпляры шардинга (процессы, воркеры или кластеры) создаются шардинг менеджером.
Он занимается обработкой межпроцессных сообщений и распределением шардов между экземплярами шардинга.
Важно знать о шардинге через шардинг менеджер, потому что это необходимая часть для масштабирования вашего бота.

### Создание шардинг менеджера
1. Создайте отдельный файл для шардинг менеджера.
2. Убедитесь что этот файл **никак не запрашивается** (require, import) внутри экземпляра шардинга, иначе вы получите ошибку о рекурсивном создании менеджера шардов, и если вы её не обработаете, node.js остановит исполнение процесса экземпляра шардинга.
3. В этом файле импортируйте менеджер шардов и запустите его:

=== "JS"
```js
const { ShardingManager } = require('discordoo')

const manager = new ShardingManager({
  file: 'C:/путь/к/вашему/старому/файлу/запуска.js', 
  // например, если вы запускали бота через node bot.js, то выше нужно указать путь к этому файлу
  shards: 2, // количество шардов
  mode: 'processes', // режим шардинга, processes означает создание новых процессов в качестве экземпляров шардинга
  shardsPerInstance: 1 // сколько gateway (discord) шардов запускать в одном экземпляре, по умолчанию - 1
})

manager.start()
  .then(() => 'spawned!')
```
